<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Glossi Board Update Dashboard</title>
  <meta name="theme-color" content="#0a0d12">
  <meta name="description" content="Glossi investor dashboard for tracking fundraising, pipeline, and board updates.">
  <meta property="og:title" content="Glossi Board Update Dashboard">
  <meta property="og:description" content="Glossi investor dashboard for tracking fundraising, pipeline, and board updates.">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Glossi Board Update Dashboard">
  <meta name="twitter:description" content="Glossi investor dashboard for tracking fundraising, pipeline, and board updates.">
  <link rel="icon" type="image/svg+xml" href="Asset 3.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Instrument+Sans:wght@400;500;600;700&display=swap" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Instrument+Sans:wght@400;500;600;700&display=swap"></noscript>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.2/src/light/style.css">
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <h1 class="sr-only">Glossi Board Update Dashboard</h1>
  <!-- Top Navigation -->
  <header class="top-nav">
    <div class="nav-left">
      <a href="index.html" title="Dashboard" class="nav-logo-link">
        <img src="assets/glossi-logo.svg" alt="" class="nav-logo-icon">
        <img src="assets/glossi-wordmark.svg" alt="Glossi" class="logo-img">
      </a>
    </div>
    <div class="nav-right">
      <nav class="nav-links">
        <a href="index.html" class="nav-link nav-link-active">Dashboard</a>
        <a href="notebook.html" class="nav-link">Notebook</a>
        <a href="pr.html" class="nav-link">PR</a>
      </nav>
      <button class="nav-settings-icon" id="nav-settings-btn" title="Settings">
        <i class="ph-light ph-gear"></i>
      </button>
      <div class="dropdown-wrapper nav-mobile-menu">
        <button class="btn-icon" id="menu-btn" title="Menu" aria-label="Open menu">
          <i class="ph-light ph-list"></i>
        </button>
        <div class="dropdown-menu" id="dropdown-menu">
          <a href="notebook.html" class="dropdown-item">
            <i class="ph-light ph-book-open"></i>
            Notebook
          </a>
          <a href="pr.html" class="dropdown-item">
            <i class="ph-light ph-book-open"></i>
            PR
          </a>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item" id="menu-share">
            <i class="ph-light ph-share-network"></i>
            Share
          </button>
          <button class="dropdown-item" id="menu-settings">
            <i class="ph-light ph-gear"></i>
            Settings
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Seed Raise Funnel Section -->
  <section class="seed-raise-section" style="contain: layout;">
    <div class="seed-raise-header">
      <h2>Seed Raise</h2>
      <div class="seed-raise-progress">
        <span class="raised" id="seed-raised">$0</span>
        <span class="progress-divider">/</span>
        <span class="target" id="seed-target">$500K</span>
        <div class="seed-progress-bar">
          <div class="seed-progress-fill" id="seed-progress-fill"></div>
        </div>
        <span class="progress-percent" id="seed-percent">0%</span>
      </div>
      <button class="add-btn-small" id="add-investor-btn" title="Add Investor" aria-label="Add investor">
        <i class="ph-light ph-plus"></i>
      </button>
    </div>
    
    <div class="funnel-kanban">
      <div class="funnel-column" data-stage="interested">
        <div class="column-header">
          <div class="column-header-left">
            <span class="column-title">Interested</span>
            <span class="column-count" id="count-interested">(0)</span>
          </div>
          <span class="column-total" id="total-interested"></span>
        </div>
        <div class="column-items" id="stage-interested">
          <!-- Investor cards rendered here -->
        </div>
      </div>
      <div class="funnel-column" data-stage="inTalks">
        <div class="column-header">
          <div class="column-header-left">
            <span class="column-title">In Talks</span>
            <span class="column-count" id="count-inTalks">(0)</span>
          </div>
          <span class="column-total" id="total-inTalks"></span>
        </div>
        <div class="column-items" id="stage-inTalks">
          <!-- Investor cards rendered here -->
        </div>
      </div>
      <div class="funnel-column" data-stage="committed">
        <div class="column-header">
          <div class="column-header-left">
            <span class="column-title">Committed</span>
            <span class="column-count" id="count-committed">(0)</span>
          </div>
          <span class="column-total" id="total-committed"></span>
        </div>
        <div class="column-items" id="stage-committed">
          <!-- Investor cards rendered here -->
        </div>
      </div>
      <div class="funnel-column" data-stage="closed">
        <div class="column-header">
          <div class="column-header-left">
            <span class="column-title">Closed</span>
            <span class="column-count" id="count-closed">(0)</span>
          </div>
          <span class="column-total" id="total-closed"></span>
        </div>
        <div class="column-items" id="stage-closed">
          <!-- Investor cards rendered here -->
        </div>
      </div>
    </div>
  </section>

  <!-- Pipeline Section -->
  <section class="pipeline-section" style="contain: layout;">
    <div class="pipeline-header">
      <h2>Sales Pipeline</h2>
      <div class="pipeline-progress">
        <span class="pipeline-closed" id="pipeline-closed-value">$0</span>
        <span class="progress-divider">/</span>
        <span class="pipeline-target" id="pipeline-target">$900K</span>
        <span class="pipeline-deal-count" id="pipeline-deal-count"></span>
      </div>
      <div class="pipeline-sync-status">
        <span class="sync-time" id="pipeline-sync-time">Not synced</span>
        <button class="btn-icon btn-icon-sm" id="pipeline-refresh-btn" title="Refresh Pipeline" aria-label="Refresh pipeline">
          <i class="ph-light ph-arrows-clockwise"></i>
        </button>
      </div>
    </div>
    
    <!-- Stage Pills Row -->
    <div class="pipeline-stages-row" id="pipeline-stages-row">
      <!-- Stage pills rendered dynamically -->
    </div>
    
    <!-- Deals Grid (shown when stage selected) -->
    <div class="pipeline-deals-section" id="pipeline-deals-section">
      <div class="pipeline-deals-header" id="pipeline-deals-header"></div>
      <div class="pipeline-deals-grid" id="pipeline-deals-grid">
        <!-- Deal cards rendered here -->
      </div>
    </div>
    
    <!-- Empty State -->
    <div class="pipeline-empty-state" id="pipeline-empty">
      <p>No pipeline data. Configure Google Sheet URL in Settings or drop a CSV file.</p>
    </div>
  </section>

  <!-- Main Dashboard Container -->
  <main class="dashboard-container">
    <!-- Left Panel: Meeting Minutes (Last Week at a Glance) -->
    <section class="panel panel-left">
      <div class="panel-header">
        <h2>Week at a Glance</h2>
        <div class="header-controls">
          <button class="btn btn-icon btn-secondary" id="add-notes-btn" title="Add Notes" aria-label="Add notes">
            <i class="ph-light ph-plus"></i>
          </button>
        </div>
      </div>

      <div class="panel-content">
        <!-- Current Meeting Summary -->
        <div class="meeting-card" id="current-meeting">
          <div class="meeting-columns">
            <!-- Left Column: Summary & Decisions -->
            <div class="meeting-column-left">
              <!-- Summary Section -->
              <div class="meeting-section collapsible" id="summary-section">
                <div class="section-header-row clickable" data-toggle="summary-content">
                  <div class="section-header-left">
                    <button class="collapse-toggle" aria-expanded="true" aria-label="Toggle Summary">
                      <i class="ph-light ph-caret-down"></i>
                    </button>
                    <h2 class="section-title-h4">Summary</h2>
                    <span class="item-count" id="summary-count"></span>
                  </div>
                  <div class="section-header-right">
                    <label for="meeting-select" class="sr-only">Select meeting date</label>
                    <select id="meeting-select" class="time-filter time-filter-small">
                      <option value="latest">This Week</option>
                      <!-- Populated by JS with past weeks -->
                    </select>
                    <button class="add-btn-small" id="add-summary-btn" title="Add summary point" aria-label="Add summary point">
                      <i class="ph-light ph-plus"></i>
                    </button>
                  </div>
                </div>
                <div class="section-content" id="summary-content">
                  <ul class="summary-list" id="meeting-summary">
                    <li class="empty-state">No meeting notes yet. Click + to add notes.</li>
                  </ul>
                </div>
              </div>

              <!-- Key Decisions -->
              <div class="meeting-section collapsible" id="decisions-section">
                <div class="section-header-row clickable" data-toggle="decisions-content">
                  <div class="section-header-left">
                    <button class="collapse-toggle" aria-expanded="true" aria-label="Toggle Key Decisions">
                      <i class="ph-light ph-caret-down"></i>
                    </button>
                    <h2 class="section-title-h4">Key Decisions</h2>
                    <span class="item-count" id="decisions-count"></span>
                  </div>
                  <button class="add-btn-small" id="add-decision-btn" title="Add decision" aria-label="Add decision">
                    <i class="ph-light ph-plus"></i>
                  </button>
                </div>
                <div class="section-content" id="decisions-content">
                  <ul class="decisions-list" id="decisions-list">
                    <li class="empty-state">No decisions recorded.</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Right Column: Action Items (Independent) -->
            <div class="meeting-column-right">
              <div class="meeting-section collapsible" id="actions-section">
                <div class="section-header-row clickable" data-toggle="actions-content">
                  <div class="section-header-left">
                    <button class="collapse-toggle" aria-expanded="true" aria-label="Toggle Action Items">
                      <i class="ph-light ph-caret-down"></i>
                    </button>
                    <h2 class="section-title-h4">Action Items</h2>
                  </div>
                  <div class="section-header-right">
                    <button class="add-btn-small" id="add-todo-btn" title="Add action item" aria-label="Add action item">
                      <i class="ph-light ph-plus"></i>
                    </button>
                    <span class="meeting-status" id="meeting-status">
                      <span id="todo-progress">0/0 complete</span>
                    </span>
                  </div>
                </div>
                <div class="section-content" id="actions-content">
                  <div class="action-progress-bar" id="action-progress-bar">
                    <div class="action-progress-fill" id="action-progress-fill"></div>
                  </div>
                  <div class="todo-list" id="todo-list">
                    <div class="empty-state">No action items yet.</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Links Card -->
        <div class="links-card" id="links-card">
          <div class="links-header">
            <h2 class="section-title-h4">Quick Links</h2>
            <button class="add-btn-small" id="add-section-btn" title="Add section" aria-label="Add section">
              <i class="ph-light ph-plus"></i>
            </button>
          </div>
          <div class="links-list" id="links-list">
            <!-- Populated by JS with sections and links -->
          </div>
        </div>

      </div>
    </section>

  </main>

  <!-- Review Modal -->
  <div class="modal-overlay" id="review-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Review Suggested Changes</h2>
        <button class="btn-icon modal-close" id="modal-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body" id="review-content">
        <!-- Populated by JS with AI suggestions -->
        <div class="review-loading">
          <div class="glossi-loader glossi-loader-sm">
            <svg class="glossi-loader-dots" viewBox="0 0 100 100"><line x1="90.0" y1="50.0" x2="98.0" y2="50.0" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-0"/><line x1="88.6" y1="60.4" x2="96.4" y2="62.4" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-1"/><line x1="84.6" y1="70.0" x2="91.6" y2="74.0" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-2"/><line x1="78.3" y1="78.3" x2="83.9" y2="83.9" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-3"/><line x1="70.0" y1="84.6" x2="74.0" y2="91.6" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-4"/><line x1="60.4" y1="88.6" x2="62.4" y2="96.4" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-5"/><line x1="50.0" y1="90.0" x2="50.0" y2="98.0" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-6"/><line x1="39.6" y1="88.6" x2="37.6" y2="96.4" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-7"/><line x1="30.0" y1="84.6" x2="26.0" y2="91.6" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-8"/><line x1="21.7" y1="78.3" x2="16.1" y2="83.9" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-9"/><line x1="15.4" y1="70.0" x2="8.4" y2="74.0" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-10"/><line x1="11.4" y1="60.4" x2="3.6" y2="62.4" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-11"/><line x1="10.0" y1="50.0" x2="2.0" y2="50.0" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-12"/><line x1="11.4" y1="39.6" x2="3.6" y2="37.6" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-13"/><line x1="15.4" y1="30.0" x2="8.4" y2="26.0" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-14"/><line x1="21.7" y1="21.7" x2="16.1" y2="16.1" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-15"/><line x1="30.0" y1="15.4" x2="26.0" y2="8.4" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-16"/><line x1="39.6" y1="11.4" x2="37.6" y2="3.6" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-17"/><line x1="50.0" y1="10.0" x2="50.0" y2="2.0" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-18"/><line x1="60.4" y1="11.4" x2="62.4" y2="3.6" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-19"/><line x1="70.0" y1="15.4" x2="74.0" y2="8.4" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-20"/><line x1="78.3" y1="21.7" x2="83.9" y2="16.1" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-21"/><line x1="84.6" y1="30.0" x2="91.6" y2="26.0" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-22"/><line x1="88.6" y1="39.6" x2="96.4" y2="37.6" stroke="#fff" stroke-width="1" stroke-linecap="round" class="gl-tick gl-tick-23"/></svg>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="review-reject">Reject All</button>
        <button class="btn btn-primary" id="review-accept">Accept Changes</button>
      </div>
    </div>
  </div>

  <!-- Meeting Notes Modal -->
  <div class="modal-overlay" id="notes-modal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2>Add Meeting Notes</h2>
        <button class="btn-icon modal-close" id="notes-modal-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="notes-input-section">
          <label for="meeting-title">Meeting Title</label>
          <input type="text" id="meeting-title" placeholder="Weekly Board Sync" class="input">
        </div>
        <div class="notes-input-section">
          <label for="meeting-date-input">Date</label>
          <input type="date" id="meeting-date-input" class="input">
        </div>
        <div class="notes-input-section">
          <label for="meeting-notes-input">Meeting Notes</label>
          <textarea id="meeting-notes-input" class="input textarea" placeholder="Paste your meeting notes here. Claude Opus will analyze them and extract:
- Key summary points
- Action items with owners
- Important decisions made
- Updates to pipeline or talking points"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="notes-cancel">Cancel</button>
        <button class="btn btn-secondary" id="notes-save-direct">Save as Notes</button>
        <button class="btn btn-primary" id="notes-process">
          <i class="ph-light ph-lightning"></i>
          Process with AI
        </button>
      </div>
    </div>
  </div>

  <!-- Todo Review Modal -->
  <div class="modal-overlay" id="todo-review-modal">
    <div class="modal modal-medium">
      <div class="modal-header">
        <h2>Review Action Items</h2>
        <button class="btn-icon modal-close" id="todo-review-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Select which action items to add to your todo list. You can edit the text and assignee.</p>
        <div class="todo-review-list" id="todo-review-list">
          <!-- Populated by JS -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="todo-review-skip">Skip All</button>
        <button class="btn btn-primary" id="todo-review-add">Add Selected</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="settings-modal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="btn-icon modal-close" id="settings-modal-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h3>AI Configuration</h3>
          <p class="settings-description">API keys are configured via environment variables in production.</p>
          <div class="api-status-grid">
            <div class="api-status-item">
              <span class="settings-label">Anthropic API</span>
              <span class="status-badge" id="anthropic-env-status">Checking...</span>
            </div>
            <div class="api-status-item">
              <span class="settings-label">OpenAI API</span>
              <span class="status-badge" id="openai-env-status">Checking...</span>
            </div>
          </div>
          <p class="settings-hint">Contact your administrator to update API keys in production.</p>
        </div>
        <div class="settings-section">
          <h3>Seed Raise</h3>
          <p class="settings-description">Set your fundraising target for the seed raise tracker.</p>
          <div class="input-group input-group-inline">
            <label for="seed-raise-target">Target Amount</label>
            <input type="text" id="seed-raise-target" class="input input-sm" placeholder="e.g., $500K" value="$500K">
          </div>
        </div>
        <div class="settings-section">
          <h3>Sales Pipeline</h3>
          <p class="settings-description">Set your pipeline target and connect a Google Sheet to sync deals.</p>
          <div class="input-group input-group-inline">
            <label for="pipeline-target-setting">Target Amount</label>
            <input type="text" id="pipeline-target-setting" class="input input-sm" placeholder="e.g., $900K" value="$900K">
          </div>
          <div class="input-group">
            <label for="pipeline-sheet-url">Google Sheet CSV URL</label>
            <input type="text" id="pipeline-sheet-url" class="input" placeholder="https://docs.google.com/spreadsheets/d/e/.../pub?output=csv" value="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO6VSxW3EngXb-xa15zVxPA45zt34rjNcpAIpYqfx3iiywuPkE0jseDN0al-UsH6Xqkxt5eI6Y0L4w/pub?output=csv&gid=0">
          </div>
          <p class="settings-hint">Auto-refreshes every 5 minutes when configured.</p>
        </div>
        <div class="settings-section">
          <h3>Data Storage</h3>
          <p class="settings-description">Your data is stored locally in JSON files.</p>
          <div class="storage-actions">
            <button class="btn btn-secondary" id="export-data">Export All Data</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="settings-save">Save Settings</button>
      </div>
    </div>
  </div>


  <!-- Decision Modal -->
  <div class="modal-overlay" id="decision-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Add Decision</h2>
        <button class="btn-icon modal-close" id="decision-modal-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="notes-input-section">
          <label for="decision-text">Decision</label>
          <input type="text" id="decision-text" placeholder="e.g., Approved Q2 marketing budget" class="input">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="decision-cancel">Cancel</button>
        <button class="btn btn-primary" id="decision-save">Add</button>
      </div>
    </div>
  </div>


  <!-- Link Modal -->
  <div class="modal-overlay" id="link-modal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="link-modal-title">Add Link</h2>
        <button class="btn-icon modal-close" id="link-modal-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="notes-input-section">
          <label for="link-name">Display Name</label>
          <input type="text" id="link-name" placeholder="e.g., Product Demo" class="input">
        </div>
        <div class="notes-input-section">
          <label for="link-url">URL</label>
          <input type="url" id="link-url" placeholder="https://..." class="input">
        </div>
        <div class="notes-input-section">
          <label for="link-section">Section</label>
          <select id="link-section" class="input">
            <!-- Populated dynamically -->
          </select>
        </div>
        <div class="notes-input-section">
          <label for="link-email-label">Email Label (optional)</label>
          <input type="text" id="link-email-label" placeholder="Label shown in emails" class="input">
        </div>
        <div class="notes-input-section">
          <label>Color</label>
          <div class="color-picker">
            <button type="button" class="color-option default selected" data-color="default" aria-label="Default color"></button>
            <button type="button" class="color-option red" data-color="red" aria-label="Red color"></button>
            <button type="button" class="color-option blue" data-color="blue" aria-label="Blue color"></button>
            <button type="button" class="color-option purple" data-color="purple" aria-label="Purple color"></button>
            <button type="button" class="color-option green" data-color="green" aria-label="Green color"></button>
            <button type="button" class="color-option orange" data-color="orange" aria-label="Orange color"></button>
          </div>
        </div>
        <div class="notes-input-section">
          <label class="toggle-row">
            <input type="checkbox" id="link-email-enabled" checked>
            <span class="toggle-switch"></span>
            <span class="toggle-label">Include in investor emails</span>
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" id="link-delete" style="margin-right: auto; display: none;">Delete</button>
        <button class="btn btn-secondary" id="link-cancel">Cancel</button>
        <button class="btn btn-primary" id="link-save">Save</button>
      </div>
    </div>
  </div>

  <!-- Investor Modal -->
  <div class="modal-overlay" id="investor-modal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="investor-modal-title">Add Investor</h2>
        <button class="btn-icon modal-close" id="investor-modal-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="notes-input-section">
          <label for="investor-name">Investor Name</label>
          <input type="text" id="investor-name" placeholder="e.g., John Smith or Acme Ventures" class="input">
        </div>
        <div class="notes-input-section">
          <label for="investor-amount">Amount</label>
          <input type="text" id="investor-amount" placeholder="e.g., $50K" class="input">
        </div>
        <div class="notes-input-section">
          <label for="investor-stage">Stage</label>
          <select id="investor-stage" class="input">
            <option value="interested">Interested</option>
            <option value="inTalks">In Talks</option>
            <option value="committed">Committed</option>
            <option value="closed">Closed</option>
          </select>
        </div>
        <div class="notes-input-section">
          <label for="investor-notes">Notes (optional)</label>
          <textarea id="investor-notes" class="input textarea" rows="2" placeholder="Any additional context..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" id="investor-delete" style="margin-right: auto; display: none;">Delete</button>
        <button class="btn btn-secondary" id="investor-cancel">Cancel</button>
        <button class="btn btn-primary" id="investor-save">Save</button>
      </div>
    </div>
  </div>

  <!-- Unified Content Intelligence Modal -->
  <div class="modal-overlay" id="content-action-modal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2 id="unified-modal-title">Content Analysis</h2>
        <button class="btn-icon modal-close" id="content-action-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body unified-preview-body">
        <div class="content-analysis-result" id="content-analysis-result">
          <!-- Analysis result / loading state rendered here -->
        </div>
        <div class="unified-preview-sections" id="unified-preview-sections" style="display: none;">
          <!-- Dynamically populated with extracted data sections -->
        </div>
      </div>
      <div class="modal-footer unified-preview-footer" id="unified-preview-footer" style="display: none;">
        <button class="btn btn-secondary" id="unified-cancel">Cancel</button>
        <button class="btn btn-primary" id="unified-apply-selected">
          <i class="ph-light ph-check"></i>
          Apply Selected
        </button>
      </div>
    </div>
  </div>


  <!-- Add Source Modal -->
  <div class="modal-overlay" id="kb-source-modal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2>Add Source</h2>
        <button class="btn-icon modal-close" id="kb-source-modal-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <!-- Source Type Tabs -->
        <div class="kb-source-tabs">
          <button class="kb-source-tab active" data-type="text">
            <i class="ph-light ph-file-text"></i>
            Paste Text
          </button>
          <button class="kb-source-tab" data-type="url">
            <i class="ph-light ph-link"></i>
            URL
          </button>
        </div>

        <!-- Text Input Panel -->
        <div class="kb-source-panel active" id="kb-panel-text">
          <div class="notes-input-section">
            <label for="kb-source-title">Title (optional)</label>
            <input type="text" id="kb-source-title" class="input" placeholder="e.g., Q4 Customer Feedback">
          </div>
          <div class="notes-input-section">
            <label for="kb-source-text">Content</label>
            <textarea id="kb-source-text" class="input textarea" rows="10" placeholder="Paste your text content here..."></textarea>
          </div>
        </div>

        <!-- URL Input Panel -->
        <div class="kb-source-panel" id="kb-panel-url">
          <div class="notes-input-section">
            <label for="kb-source-url">URL</label>
            <input type="url" id="kb-source-url" class="input" placeholder="https://...">
          </div>
          <p class="kb-url-hint">The content will be fetched and analyzed automatically.</p>
        </div>

        <!-- Category Selection -->
        <div class="kb-category-section">
          <label>Category</label>
          <div class="kb-category-options" id="kb-category-options">
            <button class="kb-category-btn active" data-category="auto">
              <i class="ph-light ph-lightning"></i>
              Auto-detect
            </button>
            <button class="kb-category-btn" data-category="market">Market Research</button>
            <button class="kb-category-btn" data-category="customer">Customer Feedback</button>
            <button class="kb-category-btn" data-category="competitor">Competitor Intel</button>
            <button class="kb-category-btn" data-category="product">Product Notes</button>
            <button class="kb-category-btn" data-category="other">Other</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="kb-source-cancel">Cancel</button>
        <button class="btn btn-primary" id="kb-source-save">
          <i class="ph-light ph-plus"></i>
          Add Source
        </button>
      </div>
    </div>
  </div>

  <!-- Generate Report Modal -->
  <div class="modal-overlay" id="kb-report-modal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2>Generate Report</h2>
        <button class="btn-icon modal-close" id="kb-report-modal-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <!-- Report Templates -->
        <div class="kb-report-templates">
          <label>Choose a template or describe what you need:</label>
          <div class="kb-template-options">
            <button class="kb-template-btn" data-template="investor_update">
              <i class="ph-light ph-squares-four"></i>
              <span>Investor Update</span>
              <small>Weekly/monthly progress summary</small>
            </button>
            <button class="kb-template-btn" data-template="talking_points">
              <i class="ph-light ph-list-bullets"></i>
              <span>Talking Points</span>
              <small>Key points for investor calls</small>
            </button>
            <button class="kb-template-btn" data-template="due_diligence">
              <i class="ph-light ph-file-text"></i>
              <span>Due Diligence Brief</span>
              <small>Comprehensive company overview</small>
            </button>
            <button class="kb-template-btn active" data-template="custom">
              <i class="ph-light ph-lightning"></i>
              <span>Custom Report</span>
              <small>Describe what you need</small>
            </button>
          </div>
        </div>

        <!-- Custom Prompt -->
        <div class="notes-input-section">
          <label for="kb-report-prompt">What do you want to generate?</label>
          <textarea id="kb-report-prompt" class="input textarea" rows="4" placeholder="e.g., Create a summary of our competitive advantages based on customer feedback and market research..."></textarea>
        </div>

        <!-- Source Selection -->
        <div class="kb-source-selection">
          <label>Include sources:</label>
          <div class="kb-source-checkboxes" id="kb-report-sources">
            <!-- Populated dynamically -->
            <p class="kb-no-sources">Add sources first to generate reports</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="kb-report-cancel">Cancel</button>
        <button class="btn btn-primary" id="kb-report-generate">
          <i class="ph-light ph-lightning"></i>
          Generate
        </button>
      </div>
    </div>
  </div>

  <!-- Report View Modal -->
  <div class="modal-overlay" id="kb-report-view-modal">
    <div class="modal modal-large modal-report-view">
      <div class="modal-header">
        <h2 id="kb-report-view-title">Report</h2>
        <div class="modal-header-actions">
          <button class="btn btn-secondary btn-sm" id="kb-report-copy" title="Copy to clipboard">
            <i class="ph-light ph-copy"></i>
            Copy
          </button>
          <button class="btn-icon modal-close" id="kb-report-view-close" title="Close" aria-label="Close">
            <i class="ph-light ph-x"></i>
          </button>
        </div>
      </div>
      <div class="modal-body">
        <div class="kb-report-view-content" id="kb-report-view-content">
          <!-- Report content rendered here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Pipeline Edit Modal -->
  <div class="modal-overlay" id="pipeline-edit-modal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2>Update Pipeline</h2>
        <button class="btn-icon modal-close" id="pipeline-edit-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Paste your weekly pipeline email below. The content will be displayed as-is.</p>
        <div class="notes-input-section">
          <label for="pipeline-email-content">Pipeline Email Content</label>
          <textarea id="pipeline-email-content" class="input textarea" rows="15" placeholder="Paste your weekly pipeline email here..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="pipeline-edit-cancel">Cancel</button>
        <button class="btn btn-primary" id="pipeline-edit-save">
          <i class="ph-light ph-check"></i>
          Save Pipeline
        </button>
      </div>
    </div>
  </div>

  <!-- Share Email Modal -->
  <div class="modal-overlay" id="share-email-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Generate Weekly Email</h2>
        <button class="btn-icon modal-close" id="share-email-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Select sections to include in your weekly update email.</p>
        
        <div class="share-sections">
          <label class="checkbox-item">
            <input type="checkbox" id="share-pipeline" checked>
            <span class="checkbox-label">Pipeline Summary</span>
            <span class="checkbox-hint">Totals, stage breakdown, hot deals</span>
          </label>
          
          <label class="checkbox-item">
            <input type="checkbox" id="share-seedraise" checked>
            <span class="checkbox-label">Seed Raise Progress</span>
            <span class="checkbox-hint">Amount raised, recent commits</span>
          </label>
          
          <label class="checkbox-item">
            <input type="checkbox" id="share-meetings" checked>
            <span class="checkbox-label">Week at a Glance</span>
            <span class="checkbox-hint">Summary, decisions, action items</span>
          </label>
          
          <div class="checkbox-item checkbox-item-expandable">
            <label class="checkbox-item-header">
              <input type="checkbox" id="share-reports">
              <span class="checkbox-label">Notebook Reports</span>
              <span class="checkbox-hint" id="share-reports-hint">No reports generated</span>
            </label>
            <div class="checkbox-subitems" id="share-reports-list"></div>
          </div>
          
          <div class="checkbox-item checkbox-item-expandable">
            <label class="checkbox-item-header">
              <input type="checkbox" id="share-links" checked>
              <span class="checkbox-label">Links</span>
              <span class="checkbox-hint" id="share-links-hint">Include resource links</span>
            </label>
            <div class="checkbox-subitems has-items" id="share-links-list"></div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="share-email-cancel">Cancel</button>
        <button class="btn btn-primary" id="share-email-generate">
          <i class="ph-light ph-paper-plane-tilt"></i>
          Generate Email
        </button>
      </div>
    </div>
  </div>

  <!-- Email Preview Modal -->
  <div class="modal-overlay" id="email-preview-modal">
    <div class="modal modal-wide">
      <div class="modal-header">
        <h2>Your Weekly Email</h2>
        <button class="btn-icon modal-close" id="email-preview-close" title="Close" aria-label="Close">
          <i class="ph-light ph-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="email-preview-field">
          <label for="email-preview-subject">Subject</label>
          <input type="text" id="email-preview-subject" class="email-preview-input" placeholder="Email subject">
        </div>
        <div class="email-preview-field">
          <label for="email-preview-body">Body</label>
          <textarea id="email-preview-body" class="email-preview-textarea" placeholder="Email body"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="email-preview-cancel">Close</button>
        <button class="btn btn-primary" id="email-preview-copy">
          <i class="ph-light ph-copy"></i>
          Copy to Clipboard
        </button>
      </div>
    </div>
  </div>

  <!-- Progress Overlay -->
  <div class="progress-overlay" id="progress-overlay">
    <div class="progress-card">
      <div class="progress-title" id="progress-title">Processing Audio</div>
      <div class="progress-status" id="progress-status">Uploading...</div>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <div class="progress-percent" id="progress-percent">0%</div>
    </div>
  </div>


  <!-- Confirmation Modal -->
  <div class="modal-overlay" id="confirm-modal">
    <div class="modal modal-confirm">
      <div class="modal-header">
        <h2 id="confirm-modal-title">Confirm</h2>
      </div>
      <div class="modal-body">
        <p id="confirm-modal-message">Are you sure?</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="confirm-modal-cancel">Cancel</button>
        <button class="btn btn-danger" id="confirm-modal-ok">OK</button>
      </div>
    </div>
  </div>

  <!-- Prompt Modal -->
  <div class="modal-overlay" id="prompt-modal">
    <div class="modal modal-prompt">
      <div class="modal-header">
        <h2 id="prompt-modal-title">Enter Value</h2>
      </div>
      <div class="modal-body">
        <input type="text" class="input" id="prompt-modal-input" placeholder="">
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="prompt-modal-cancel">Cancel</button>
        <button class="btn btn-primary" id="prompt-modal-ok">OK</button>
      </div>
    </div>
  </div>

  <!-- Alert Modal -->
  <div class="modal-overlay" id="alert-modal">
    <div class="modal modal-alert">
      <div class="modal-header">
        <h2 id="alert-modal-title">Notice</h2>
      </div>
      <div class="modal-body">
        <p id="alert-modal-message"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="alert-modal-ok">OK</button>
      </div>
    </div>
  </div>

  <!-- Toast Notifications -->
  <div class="toast-container" id="toast-container"></div>

  <!-- PDF Export Template (hidden) -->
  <div id="pdf-template" style="display: none;"></div>

  <!-- Scripts -->
  <script type="module" src="app.js"></script>
</body>
</html>
