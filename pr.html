<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>PR - Glossi</title>
  <meta name="theme-color" content="#0a0d12">
  <link rel="icon" type="image/svg+xml" href="Asset 3.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="dashboard.css">
</head>
<body class="pr-page">
  <!-- Top Navigation -->
  <header class="top-nav">
    <div class="nav-left">
      <a href="index.html" class="nav-back" title="Back to Dashboard">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
      </a>
      <img src="Asset 3.svg" alt="Glossi" class="logo-img">
      <span class="nav-page-title">PR</span>
    </div>
    <div class="nav-right">
      <div class="dropdown-wrapper">
        <button class="btn-icon" id="menu-btn" title="Menu">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        <div class="dropdown-menu" id="dropdown-menu">
          <a href="index.html" class="dropdown-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            Dashboard
          </a>
          <a href="notebook.html" class="dropdown-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
            Notebook
          </a>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item" id="menu-settings">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
            </svg>
            Settings
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main PR Layout -->
  <main class="pr-main">
    <!-- Mobile Tab Bar -->
    <div class="pr-mobile-tabs" id="pr-mobile-tabs">
      <button class="pr-mobile-tab active" data-tab="sources">Sources</button>
      <button class="pr-mobile-tab" data-tab="media">Media</button>
      <button class="pr-mobile-tab" data-tab="calendar">Calendar</button>
      <button class="pr-mobile-tab" data-tab="workspace">Workspace</button>
      <button class="pr-mobile-tab" data-tab="strategy">Strategy</button>
    </div>

    <div class="pr-layout">
      <!-- Column 1: Sources/Media/Calendar -->
      <div class="pr-sources-panel" id="pr-sources-panel">
        <!-- Left Panel Tabs -->
        <div class="pr-left-tabs">
          <button class="pr-left-tab active" data-left-tab="sources">Sources</button>
          <button class="pr-left-tab" data-left-tab="media">Media</button>
          <button class="pr-left-tab" data-left-tab="calendar">Calendar</button>
        </div>
        
        <!-- Sources Tab Content -->
        <div class="pr-left-tab-content active" id="pr-tab-sources">
        <div class="pr-sources-header">
          <span class="pr-sources-label">Sources</span>
          <span class="pr-sources-count" id="pr-sources-count">0</span>
          <button class="pr-create-folder-btn" id="pr-create-folder-btn" title="Create Folder">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
          </button>
        </div>
        <div class="pr-source-search-wrap">
          <input type="text" class="pr-source-search" id="pr-source-search" placeholder="Search sources...">
        </div>
        <div class="pr-sources-list pr-drop-zone" id="pr-sources-list">
          <div class="pr-sources-empty" id="pr-sources-empty">
            <p>No sources yet</p>
            <p class="pr-empty-hint">Add content the PR agent can reference</p>
          </div>
        </div>
        <button class="pr-add-source-btn" id="pr-add-source-btn">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          <span>Add Source</span>
        </button>

        <!-- History Section -->
        <div class="pr-history-divider"></div>
        <div class="pr-history-header" id="pr-history-toggle">
          <svg class="pr-history-chevron" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
          <span>ðŸ“š Content Library</span>
          <span class="pr-history-badge" id="pr-history-count">0</span>
        </div>
        <div id="pr-history-content">
          <div class="pr-history-list" id="pr-history-list">
            <div class="pr-history-empty" id="pr-history-empty">
              <p>No saved content yet</p>
              <p class="pr-empty-hint">Generated content saves automatically</p>
            </div>
          </div>
        </div>
        </div>
        
        <!-- Media Tab Content -->
        <div class="pr-left-tab-content" id="pr-tab-media">
          <div class="pr-media-view">
            <!-- Media view/toggle buttons -->
            <div class="pr-media-header">
              <div class="pr-media-toggle">
                <button class="pr-media-toggle-btn active" data-media-view="discover">Discover</button>
                <button class="pr-media-toggle-btn" data-media-view="track">Track</button>
              </div>
            </div>
            
            <!-- Discover View (Outlets) -->
            <div class="pr-media-discover active" id="pr-media-discover">
              <div class="pr-media-outlets" id="pr-media-outlets">
                <p class="pr-loading-text">Loading outlets...</p>
              </div>
            </div>
            
            <!-- Track View (Pitches) -->
            <div class="pr-media-track" id="pr-media-track">
              <div class="pr-pitch-tracker" id="pr-pitch-tracker">
                <p class="pr-empty-text">No pitches tracked yet</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Calendar Tab Content -->
        <div class="pr-left-tab-content" id="pr-tab-calendar">
          <div class="pr-calendar-header">
            <span class="pr-calendar-label">Content Calendar</span>
            <button class="btn-icon" id="pr-add-calendar-item" title="Add item">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </div>
          <div class="pr-calendar-timeline" id="pr-calendar-timeline">
            <div class="pr-calendar-empty">
              <p>No items scheduled</p>
              <p class="pr-empty-hint">Add content to your calendar</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Column 2: Workspace -->
      <div class="pr-workspace-panel" id="pr-workspace-panel">
        <!-- Top bar -->
        <div class="pr-workspace-topbar">
          <div class="pr-workspace-controls">
            <select class="pr-content-type" id="pr-content-type">
              <option value="press_release">Press Release</option>
              <option value="media_pitch">Media Pitch Email</option>
              <option value="product_announcement">Product Announcement</option>
              <option value="founder_quote">Founder Quote / Soundbite</option>
              <option value="blog_post">Blog Post</option>
              <option value="linkedin_post">LinkedIn Post</option>
              <option value="tweet_thread">Tweet Thread</option>
              <option value="briefing_doc">Briefing Document</option>
              <option value="talking_points">Talking Points</option>
              <option value="custom">Custom</option>
            </select>
            <button class="pr-generate-btn" id="pr-generate-btn" disabled>
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
              </svg>
              Generate
            </button>
            <button class="pr-regenerate-btn" id="pr-regenerate-btn" style="display:none">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 4v6h-6"></path>
                <path d="M1 20v-6h6"></path>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
              Regenerate
            </button>
          </div>
          <div class="pr-workspace-actions" style="display:none" id="pr-workspace-actions">
            <button class="pr-action-btn" id="pr-copy-btn" title="Copy to clipboard">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            </button>
            <div class="pr-export-wrap">
              <button class="pr-action-btn" id="pr-export-btn" title="Export">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
              </button>
              <div class="pr-export-menu" id="pr-export-menu">
                <button class="pr-export-item" id="pr-export-text">Copy as text</button>
                <button class="pr-export-item" id="pr-export-html">Download as HTML</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Status hint (shown when generate is disabled) -->
        <div class="pr-status-hint" id="pr-status-hint" style="display:none">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
          <span id="pr-status-hint-text"></span>
        </div>

        <!-- Custom prompt (hidden unless Custom selected) -->
        <div class="pr-custom-prompt-wrap" id="pr-custom-prompt-wrap" style="display:none">
          <textarea class="pr-custom-prompt" id="pr-custom-prompt" placeholder="Describe what you want to generate..." rows="2"></textarea>
        </div>

        <!-- Content area -->
        <div class="pr-workspace-content" id="pr-workspace-content">
          <!-- Empty state -->
          <div class="pr-workspace-empty pr-command-center" id="pr-workspace-empty">
            <div class="pr-command-center-header">
              <h2 class="pr-command-center-title">Dashboard</h2>
            </div>

            <div class="pr-command-list">
              <div class="pr-command-item pr-item-green" data-action="generate">
                <h3 class="pr-command-title">Content Library</h3>
                <span class="pr-command-stat" id="pr-stat-library">0 items saved</span>
              </div>

              <div class="pr-command-item pr-item-blue" data-action="media">
                <h3 class="pr-command-title">Media List</h3>
                <span class="pr-command-stat" id="pr-stat-journalists">0 journalists saved</span>
              </div>

              <div class="pr-command-item pr-item-purple" data-action="calendar">
                <h3 class="pr-command-title">Calendar</h3>
                <span class="pr-command-stat" id="pr-stat-calendar">0 items scheduled</span>
              </div>

              <div class="pr-command-item pr-item-orange" data-action="news">
                <h3 class="pr-command-title">News Hooks</h3>
                <span class="pr-command-stat" id="pr-stat-news">Check for updates</span>
              </div>
            </div>
          </div>

          <!-- Loading state -->
          <div class="pr-loading-state" id="pr-loading-state" style="display:none">
            <div class="pr-loading-spinner"></div>
            <p>Generating content...</p>
          </div>

          <!-- Generated content -->
          <div class="pr-workspace-generated" id="pr-workspace-generated" style="display:none">
            <div class="pr-generated-content" id="pr-generated-content"></div>
            <div class="pr-verification-bar" id="pr-verification-bar" style="display:none">
              <div class="pr-verification-info">
                <span class="pr-verification-text" id="pr-verification-text">0 of 0 claims sourced</span>
              </div>
              <div class="pr-verification-track">
                <div class="pr-verification-progress" id="pr-verification-progress"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Column 3: Strategy Panel -->
      <div class="pr-strategy-panel" id="pr-strategy-panel">
        <div class="pr-strategy-header">
          <span class="pr-strategy-label">Strategy</span>
        </div>
        
        <!-- News Hooks Section -->
        <div class="pr-news-hooks-section">
          <div class="pr-news-hooks-header">
            <h4 class="pr-news-hooks-title">News Hooks</h4>
            <button class="btn-icon" id="pr-refresh-news-btn" title="Refresh news">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 4v6h-6"></path>
                <path d="M1 20v-6h6"></path>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
          </div>
          <div class="pr-news-hooks-feed" id="pr-news-hooks-feed">
            <p class="pr-news-empty">Click refresh to find relevant news hooks</p>
          </div>
        </div>
        
        <div class="pr-strategy-divider"></div>
        
        <div class="pr-strategy-body">
          <div class="pr-strategy-content" id="pr-strategy-content"></div>
          <div class="pr-strategy-empty" id="pr-strategy-empty">
            <p>Generate content to see distribution strategy, timing recommendations, and amplification playbook.</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Add Source Modal -->
  <div class="modal-overlay" id="pr-source-modal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2>Add Source</h2>
        <button class="btn-icon modal-close" id="pr-source-modal-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <!-- Source Type Tabs -->
        <div class="pr-source-tabs">
          <button class="pr-source-tab active" data-type="text">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
            </svg>
            Paste Text
          </button>
          <button class="pr-source-tab" data-type="url">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
            </svg>
            URL
          </button>
          <button class="pr-source-tab" data-type="file">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
              <polyline points="13 2 13 9 20 9"></polyline>
            </svg>
            Upload File
          </button>
          <button class="pr-source-tab" data-type="audio">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
              <line x1="12" y1="19" x2="12" y2="23"></line>
            </svg>
            Audio
          </button>
        </div>

        <!-- Paste Text Panel -->
        <div class="pr-source-panel active" id="pr-panel-text">
          <div class="notes-input-section">
            <label for="pr-source-title">Title (optional)</label>
            <input type="text" id="pr-source-title" class="input" placeholder="e.g., Q1 Product Update">
          </div>
          <div class="notes-input-section">
            <label for="pr-source-text">Content</label>
            <textarea id="pr-source-text" class="input textarea" rows="10" placeholder="Paste your text content here..."></textarea>
          </div>
        </div>

        <!-- URL Panel -->
        <div class="pr-source-panel" id="pr-panel-url">
          <div class="notes-input-section">
            <label for="pr-source-title-url">Title (optional)</label>
            <input type="text" id="pr-source-title-url" class="input" placeholder="e.g., TechCrunch Article">
          </div>
          <div class="notes-input-section">
            <label for="pr-source-url">URL</label>
            <input type="url" id="pr-source-url" class="input" placeholder="https://...">
            <p class="input-hint">Content will be fetched and extracted automatically</p>
          </div>
        </div>

        <!-- File Upload Panel -->
        <div class="pr-source-panel" id="pr-panel-file">
          <div class="notes-input-section">
            <label for="pr-source-title-file">Title (optional)</label>
            <input type="text" id="pr-source-title-file" class="input" placeholder="e.g., Press Kit PDF">
          </div>
          <div class="pr-file-dropzone" id="pr-file-dropzone">
            <input type="file" id="pr-source-file-input" accept=".txt,.md,.csv,.pdf" style="display:none">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <span>Drop file here or click to browse</span>
            <span class="pr-dropzone-hint">PDF, TXT, MD, CSV (max 10MB)</span>
          </div>
          <div class="pr-file-preview" id="pr-file-preview" style="display:none"></div>
        </div>

        <!-- Audio Panel -->
        <div class="pr-source-panel" id="pr-panel-audio">
          <div class="notes-input-section">
            <label for="pr-source-title-audio">Title (optional)</label>
            <input type="text" id="pr-source-title-audio" class="input" placeholder="e.g., Founder Interview">
          </div>
          <div class="pr-audio-controls">
            <button class="btn btn-secondary" id="pr-audio-record">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="6" fill="currentColor"></circle>
              </svg>
              Record
            </button>
            <button class="btn btn-danger" id="pr-audio-stop" style="display:none">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="6" y="6" width="12" height="12" fill="currentColor"></rect>
              </svg>
              Stop
            </button>
            <span class="pr-audio-divider">or</span>
            <button class="btn btn-secondary" id="pr-audio-upload-btn">Upload Audio</button>
            <input type="file" id="pr-audio-file-input" accept=".mp3,.wav,.m4a,.webm" style="display:none">
          </div>
          <div class="pr-audio-indicator" id="pr-audio-indicator" style="display:none">
            <span class="pr-recording-dot"></span>
            <span>Recording...</span>
          </div>
          <div class="pr-audio-preview" id="pr-audio-preview" style="display:none">
            <span id="pr-audio-status">Processing...</span>
          </div>
          <div class="pr-audio-transcript" id="pr-audio-transcript" style="display:none"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="pr-source-cancel">Cancel</button>
        <button class="btn btn-primary" id="pr-source-save">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Add Source
        </button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="settings-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="btn-icon modal-close" id="settings-modal-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h3>AI Configuration</h3>
          <p class="input-hint" style="margin-bottom: var(--space-3)">API keys are shared across all Glossi pages. Configure them on the <a href="index.html" style="color: var(--accent-green)">Dashboard</a>.</p>
          <div class="pr-settings-status">
            <div class="pr-settings-row">
              <span class="pr-settings-label-text">Anthropic API Key</span>
              <span class="pr-settings-badge" id="pr-anthropic-status">Not set</span>
            </div>
            <div class="pr-settings-row">
              <span class="pr-settings-label-text">OpenAI API Key</span>
              <span class="pr-settings-badge" id="pr-openai-status">Not set</span>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <a href="index.html" class="btn btn-primary">Open Dashboard Settings</a>
        <button class="btn btn-secondary" id="settings-cancel">Close</button>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="modal-overlay" id="confirm-modal">
    <div class="modal modal-confirm">
      <div class="modal-header">
        <h2 id="confirm-modal-title">Confirm</h2>
      </div>
      <div class="modal-body">
        <p id="confirm-modal-message">Are you sure?</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="confirm-modal-cancel">Cancel</button>
        <button class="btn btn-danger" id="confirm-modal-ok">OK</button>
      </div>
    </div>
  </div>

  <!-- Wizard Modal -->
  <div class="wizard-overlay" id="wizard-overlay">
    <div class="wizard-container">
      <div class="wizard-header">
        <div class="wizard-progress">
          <span class="wizard-step-text" id="wizard-step-text">Step 1 of 6</span>
          <div class="wizard-progress-bar">
            <div class="wizard-progress-fill" id="wizard-progress-fill"></div>
          </div>
        </div>
        <button class="wizard-close" id="wizard-close" title="Save and close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <div class="wizard-body" id="wizard-body">
        <!-- Step 1: Company Basics -->
        <div class="wizard-step active" data-step="1">
          <h2 class="wizard-title">Tell us about your company</h2>
          <div class="wizard-field">
            <label for="wizard-company-name">Company Name</label>
            <input type="text" id="wizard-company-name" class="input" placeholder="e.g., Glossi">
          </div>
          <div class="wizard-field">
            <label for="wizard-company-description">One-line Description</label>
            <input type="text" id="wizard-company-description" class="input" placeholder="e.g., AI-native 3D product visualization platform">
          </div>
          <div class="wizard-field">
            <label for="wizard-founded-year">Founded Year</label>
            <input type="text" id="wizard-founded-year" class="input" placeholder="e.g., 2024">
          </div>
          <div class="wizard-field">
            <label for="wizard-team-size">Team Size</label>
            <input type="text" id="wizard-team-size" class="input" placeholder="e.g., 5 people">
          </div>
          <div class="wizard-field">
            <label for="wizard-headquarters">Headquarters / Location</label>
            <input type="text" id="wizard-headquarters" class="input" placeholder="e.g., San Francisco, CA">
          </div>
          <div class="wizard-field">
            <label for="wizard-website">Website URL</label>
            <input type="url" id="wizard-website" class="input" placeholder="https://glossi.io">
          </div>
          <div class="wizard-field">
            <label for="wizard-founders">Founder Name(s) and Title(s)</label>
            <input type="text" id="wizard-founders" class="input" placeholder="e.g., Jonathan Gitlin, CEO & Co-Founder">
          </div>
          <div class="wizard-field">
            <label for="wizard-founder-background">Founder Background</label>
            <textarea id="wizard-founder-background" class="input textarea" rows="3" placeholder="Previously at [company], expertise in [area]"></textarea>
            <p class="input-hint">What makes your founder(s) uniquely qualified to build this?</p>
          </div>
        </div>
        
        <!-- Step 2: The Problem -->
        <div class="wizard-step" data-step="2">
          <h2 class="wizard-title">Tell us about the problem Glossi solves</h2>
          <p class="wizard-subtitle">Be specific. Include numbers, timeframes, and pain points you've heard directly from customers.</p>
          <div class="wizard-field">
            <label for="wizard-problem">What problem does your product solve?</label>
            <textarea id="wizard-problem" class="input textarea" rows="4" placeholder="What happens when brands use AI image generators on their products?"></textarea>
            <p class="input-hint">ðŸ’¡ Example: "Colors shift, proportions drift, logos get warped. The more content you create, the worse it gets."</p>
          </div>
          <div class="wizard-field">
            <label for="wizard-who">Who experiences this problem?</label>
            <textarea id="wizard-who" class="input textarea" rows="3" placeholder="Enterprise brands, e-commerce teams, CPG marketing departments"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-current-solution">What do they currently do about it?</label>
            <textarea id="wizard-current-solution" class="input textarea" rows="3" placeholder="Traditional photography, 3D rendering, or AI generators that distort the product"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-cost">What's the cost of the current approach?</label>
            <textarea id="wizard-cost" class="input textarea" rows="3" placeholder="Weeks per shoot, $50K+ per product line, brand inconsistency at scale"></textarea>
          </div>
        </div>
        
        <!-- Step 3: The Solution -->
        <div class="wizard-step" data-step="3">
          <h2 class="wizard-title">Tell us about your solution</h2>
          <div class="wizard-field">
            <label for="wizard-solution">How does your product solve this differently?</label>
            <textarea id="wizard-solution" class="input textarea" rows="4" placeholder="What makes your approach unique?"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-technology">What is the core technology?</label>
            <textarea id="wizard-technology" class="input textarea" rows="3" placeholder="Real-time 3D compositing in browser, Unreal Engine 5"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-insight">What's the key insight or architecture decision that makes you different?</label>
            <textarea id="wizard-insight" class="input textarea" rows="3" placeholder="What do you understand that others don't?"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-analogy">Analogy: "Our product is like _____ for _____"</label>
            <input type="text" id="wizard-analogy" class="input" placeholder="e.g., green screen for products">
            <p class="input-hint">Help journalists understand quickly with a simple comparison</p>
          </div>
        </div>
        
        <!-- Step 4: Traction & Proof Points -->
        <div class="wizard-step" data-step="4">
          <h2 class="wizard-title">Traction & Proof Points</h2>
          <p class="wizard-subtitle">Numbers make stories real. "50+ brands" is good. "50+ brands including 3 Fortune 500 CPG companies" is better.</p>
          <div class="wizard-field">
            <label for="wizard-customers">Number of customers/brands using the product</label>
            <input type="text" id="wizard-customers" class="input" placeholder="e.g., 50+ brands">
          </div>
          <div class="wizard-field">
            <label for="wizard-revenue">Revenue or pipeline (optional, only used for PR if you choose)</label>
            <input type="text" id="wizard-revenue" class="input" placeholder="e.g., $200K pipeline">
          </div>
          <div class="wizard-field">
            <label for="wizard-key-metric">Key metric: cost/time reduction for customers</label>
            <input type="text" id="wizard-key-metric" class="input" placeholder="e.g., 80% reduction in photography costs">
          </div>
          <div class="wizard-field">
            <label for="wizard-notable-customers">Notable customer names (if shareable) or anonymized descriptions</label>
            <textarea id="wizard-notable-customers" class="input textarea" rows="2" placeholder="e.g., 3 Fortune 500 CPG companies, major fashion brands"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-press">Any press coverage received so far (URLs or descriptions)</label>
            <textarea id="wizard-press" class="input textarea" rows="2" placeholder="URLs or brief descriptions"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-awards">Awards, accelerator participation, notable investors</label>
            <textarea id="wizard-awards" class="input textarea" rows="2" placeholder="e.g., Y Combinator, Sequoia-backed"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-features">Features shipped in last 90 days</label>
            <textarea id="wizard-features" class="input textarea" rows="3" placeholder="List or describe recent feature launches"></textarea>
          </div>
        </div>
        
        <!-- Step 5: Why Now / Market Timing -->
        <div class="wizard-step" data-step="5">
          <h2 class="wizard-title">Why Now / Market Timing</h2>
          <div class="wizard-field">
            <label for="wizard-market-urgency">What's happening in your market right now that makes this urgent?</label>
            <textarea id="wizard-market-urgency" class="input textarea" rows="3" placeholder="What market shifts or trends create urgency?"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-tech-shifts">Are there any technology shifts or trends that validate your approach?</label>
            <textarea id="wizard-tech-shifts" class="input textarea" rows="3" placeholder="World models from Google and OpenAI are rolling out in 2026"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-moat">Why can't incumbents do what you do?</label>
            <textarea id="wizard-moat" class="input textarea" rows="3" placeholder="What makes your approach hard to replicate?"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-if-not">What happens if brands don't adopt your approach?</label>
            <textarea id="wizard-if-not" class="input textarea" rows="3" placeholder="What's the consequence of inaction?"></textarea>
          </div>
        </div>
        
        <!-- Step 6: Founder Voice -->
        <div class="wizard-step" data-step="6">
          <h2 class="wizard-title">Founder Voice</h2>
          <div class="wizard-field">
            <label for="wizard-elevator-pitch">If a journalist called you right now, what would you want to say in 30 seconds?</label>
            <textarea id="wizard-elevator-pitch" class="input textarea" rows="3" placeholder="Your clearest, most confident pitch"></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-strong-opinion">What's a strong opinion you hold about your industry?</label>
            <textarea id="wizard-strong-opinion" class="input textarea" rows="3" placeholder="Most AI tools are wrappers. They don't protect the product."></textarea>
          </div>
          <div class="wizard-field">
            <label for="wizard-investor-pitch">What's the thing you say in investor meetings that always lands?</label>
            <textarea id="wizard-investor-pitch" class="input textarea" rows="3" placeholder="What resonates most with investors?"></textarea>
          </div>
          <div class="wizard-field">
            <label>Tone Preference</label>
            <div class="wizard-radio-group">
              <label class="wizard-radio">
                <input type="radio" name="wizard-tone" value="understated" checked>
                <span>Understated and confident (like Linear)</span>
              </label>
              <label class="wizard-radio">
                <input type="radio" name="wizard-tone" value="technical">
                <span>Technical and precise (like Cursor)</span>
              </label>
              <label class="wizard-radio">
                <input type="radio" name="wizard-tone" value="bold">
                <span>Bold and direct (like a founder who knows they're right)</span>
              </label>
              <label class="wizard-radio">
                <input type="radio" name="wizard-tone" value="all">
                <span>All of the above</span>
              </label>
            </div>
          </div>
        </div>
      </div>
      
      <div class="wizard-footer">
        <button class="wizard-skip" id="wizard-skip">Skip this step</button>
        <div class="wizard-nav">
          <button class="btn btn-secondary" id="wizard-back" style="display:none">Back</button>
          <button class="btn btn-primary" id="wizard-next">Next â†’</button>
          <button class="btn btn-primary" id="wizard-finish" style="display:none">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            Finish
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <!-- PDF.js for file processing -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
  </script>

  <script type="module">
    import { PRAgent } from './modules/pr.js';

    document.addEventListener('DOMContentLoaded', async () => {
      const pr = new PRAgent();
      await pr.init();
      pr.setupFileUpload();
      pr.setupAudio();

      // Left panel tab switching (desktop)
      document.querySelectorAll('.pr-left-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          const target = tab.dataset.leftTab;
          
          // Update tab active states
          document.querySelectorAll('.pr-left-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          // Update content active states
          document.querySelectorAll('.pr-left-tab-content').forEach(content => {
            content.classList.remove('active');
          });
          document.getElementById(`pr-tab-${target}`)?.classList.add('active');
        });
      });
      
      // Mobile tab switching
      document.querySelectorAll('.pr-mobile-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.pr-mobile-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          const target = tab.dataset.tab;
          
          // Handle left panel tabs (sources, media, calendar)
          if (target === 'sources' || target === 'media' || target === 'calendar') {
            document.getElementById('pr-sources-panel').classList.add('mobile-active');
            document.getElementById('pr-workspace-panel').classList.remove('mobile-active');
            document.getElementById('pr-strategy-panel').classList.remove('mobile-active');
            
            // Switch to the correct left panel tab
            document.querySelectorAll('.pr-left-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.pr-left-tab[data-left-tab="${target}"]`)?.classList.add('active');
            
            document.querySelectorAll('.pr-left-tab-content').forEach(content => {
              content.classList.remove('active');
            });
            document.getElementById(`pr-tab-${target}`)?.classList.add('active');
          } else {
            // Handle workspace and strategy
            document.getElementById('pr-sources-panel').classList.toggle('mobile-active', false);
            document.getElementById('pr-workspace-panel').classList.toggle('mobile-active', target === 'workspace');
            document.getElementById('pr-strategy-panel').classList.toggle('mobile-active', target === 'strategy');
          }
        });
      });

      // Show generated content actions when content exists
      const observer = new MutationObserver(() => {
        const generated = document.getElementById('pr-workspace-generated');
        const actions = document.getElementById('pr-workspace-actions');
        if (generated && actions) {
          actions.style.display = generated.style.display === 'none' ? 'none' : 'flex';
        }
      });
      const generated = document.getElementById('pr-workspace-generated');
      if (generated) {
        observer.observe(generated, { attributes: true, attributeFilter: ['style'] });
      }

      // Dropdown menu
      const menuBtn = document.getElementById('menu-btn');
      const dropdownMenu = document.getElementById('dropdown-menu');
      if (menuBtn && dropdownMenu) {
        menuBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          dropdownMenu.classList.toggle('active');
        });
        document.addEventListener('click', () => dropdownMenu.classList.remove('active'));
        dropdownMenu.addEventListener('click', (e) => e.stopPropagation());
      }

      // Settings modal (read-only, keys are managed on dashboard)
      const settingsModal = document.getElementById('settings-modal');
      const settingsClose = document.getElementById('settings-modal-close');
      const settingsCancel = document.getElementById('settings-cancel');

      function openSettings() {
        const anthropicBadge = document.getElementById('pr-anthropic-status');
        const openaiBadge = document.getElementById('pr-openai-status');
        try {
          const settings = JSON.parse(localStorage.getItem('glossi_settings') || '{}');
          if (anthropicBadge) {
            const hasKey = settings.apiKey && settings.apiKey.length > 0;
            anthropicBadge.textContent = hasKey ? 'Connected' : 'Not set';
            anthropicBadge.classList.toggle('connected', hasKey);
          }
          if (openaiBadge) {
            const hasKey = settings.openaiApiKey && settings.openaiApiKey.length > 0;
            openaiBadge.textContent = hasKey ? 'Connected' : 'Not set';
            openaiBadge.classList.toggle('connected', hasKey);
          }
        } catch {}
        settingsModal?.classList.add('visible');
      }

      document.getElementById('menu-settings')?.addEventListener('click', () => {
        dropdownMenu?.classList.remove('active');
        openSettings();
      });

      settingsClose?.addEventListener('click', () => settingsModal?.classList.remove('visible'));
      settingsCancel?.addEventListener('click', () => settingsModal?.classList.remove('visible'));
      settingsModal?.addEventListener('click', (e) => {
        if (e.target === settingsModal) settingsModal.classList.remove('visible');
      });
    });
  </script>
</body>
</html>
